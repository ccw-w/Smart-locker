### Smart-locker 家庭智能储物柜项目 README


#### 项目概述
Smart-locker 是一个家庭智能储物柜系统，旨在通过嵌入式技术、传感器监测和物联网（IoT）实现储物柜的智能化管理。该系统可实时监测柜内环境（温度、湿度）、通过 OLED 屏幕本地显示状态、支持微信小程序远程查看数据，并可扩展语音交互（基于 SU-03T 语音模组）和网络通信（基于 ESP8266-01s 模块）等功能。


#### 核心功能
1. **环境监测**：实时采集储物柜内温度、湿度数据。
2. **本地显示**：通过 OLED 屏幕显示温湿度、储物柜状态（如柜门开关）及环境舒适度评级。
3. **远程监控**：通过微信小程序实时查看温湿度曲线，实现远程监测。
4. **网络通信**：基于 ESP8266-01s 模块通过 MQTT 协议上传数据至云端平台（如 OneNet）。
5. **语音交互（扩展）**：支持通过 SU-03T 语音模组实现语音控制（如开关柜门）。


#### 硬件组成
| 元器件         | 作用                          | 相关资料路径                          |
|----------------|-------------------------------|---------------------------------------|
| STM32 单片机   | 主控制器，处理数据和逻辑控制  | `Code/` 目录下的固件代码              |
| OLED 显示屏    | 本地显示温湿度、设备状态      | `元器件资料/OLED显示屏/`              |
| ESP8266-01s    | 网络通信，实现 MQTT 数据上传  | `元器件资料/ESP8266-01s/`             |
| SU-03T 语音模组 | 语音识别与交互（扩展功能）    | `元器件资料/SU-03T(语音配置)/`        |
| 温湿度传感器   | 采集环境温湿度（代码中已集成）| `Code/User/main.c` 中的数据处理逻辑   |


#### 软件架构
1. **嵌入式固件（STM32）**：
   - 负责传感器数据采集、OLED 显示控制、与 ESP8266/SU-03T 的通信。
   - 核心代码位于 `Code/` 目录，包含初始化配置、数据处理和外设驱动。

2. **微信小程序**：
   - 用于远程查看温湿度历史曲线，基于 `echarts-for-weixin` 实现数据可视化。
   - 代码位于 `STM32微信小程序/` 目录，支持实时数据更新和图表展示。

3. **网络通信**：
   - ESP8266-01s 通过 AT 指令配置 WiFi 和 MQTT 连接，将数据上传至云端（如 OneNet）。
   - 配置示例见 `元器件资料/ESP8266-01s/TXT及其他工具/`。


#### 快速开始
##### 1. 硬件搭建
- 按照硬件接线图（需补充）连接 STM32、OLED、ESP8266、传感器等模块。
- 确保各模块供电稳定，通信接口（UART/I2C）接线正确。

##### 2. 固件烧录
- **STM32 固件**：使用 Keil MDK 或 STM32CubeIDE 编译 `Code/` 目录下的项目，通过 ST-Link 烧录至单片机。
- **ESP8266 配置**：通过串口工具发送 AT 指令配置 WiFi 和 MQTT（参考 `元器件资料/ESP8266-01s/TXT及其他工具/第一步获取信息.txt`）。
- **SU-03T 固件**：根据 `元器件资料/SU-03T(语音配置)/su_03t_v1.5/jx_firm/readme.txt` 烧录对应固件，配置串口通信。

##### 3. 微信小程序运行
- 安装微信开发者工具，导入 `STM32微信小程序/` 项目。
- 安装依赖：`npm install`（依赖 `echarts-for-weixin`，已在 `package.json` 中配置）。
- 运行小程序，确保与云端平台（或本地服务器）通信正常。


#### 目录结构
```
Smart-locker/
├── Code/                  # STM32 固件代码
│   ├── Library/           # 标准库文件（如 misc.c/h）
│   └── User/              # 用户代码（主逻辑、OLED 控制等）
├── STM32微信小程序/       # 微信小程序代码
│   ├── pages/             # 页面逻辑（如 index.js 处理图表更新）
│   ├── package.json       # 依赖配置
│   └── project.config.json # 项目配置
└── 元器件资料/            # 硬件相关资料
    ├── SU-03T(语音配置)/  # 语音模组固件及通信协议
    ├── OLED显示屏/        # 显示屏取模工具及说明
    └── ESP8266-01s/       # 网络模块配置指令及测试记录
```


#### 待补充/优化建议
为使仓库更完善，建议补充或修改以下内容：

1. **硬件接线图**：添加各模块与 STM32 的详细接线示意图（如 UART 引脚、I2C 引脚定义），方便用户搭建硬件。

2. **环境配置说明**：
   - 明确 STM32 开发环境版本（如 Keil 5.37、STM32CubeMX 6.6.0）。
   - 说明微信开发者工具版本及小程序基础库版本（当前 `libVersion: "3.5.6"`）。

3. **功能测试文档**：
   - 补充各功能的测试步骤（如温湿度采集是否正常、OLED 显示是否准确、小程序能否接收数据）。
   - 记录常见问题及解决方案（如 ESP8266 连接 WiFi 失败、MQTT 通信超时）。

4. **代码注释与编码**：
   - 部分中文注释可能存在编码问题（如 `Code/User/main.c`），建议统一为 UTF-8 编码。
   - 补充关键函数的注释（如 `UpdateOLED` 函数的参数说明、逻辑说明）。

5. **元器件资料整理**：
   - 修复 OLED 取模工具说明中的乱码（如 `readme2002.txt`），替换为清晰的中文说明。
   - 补充 SU-03T 串口通信的具体使用示例（如发送控制指令的代码片段）。

6. **版本与更新日志**：添加 `CHANGELOG.md`，记录项目迭代历史（如功能新增、bug 修复）。

7. ** LICENSE**：根据项目开源需求添加开源协议（如 MIT），明确使用权限。


#### 联系与反馈
如有问题或建议，欢迎提交 Issue 或联系项目维护者。


通过以上补充和优化，仓库将更易于理解和使用，方便其他开发者快速上手或进行二次开发。